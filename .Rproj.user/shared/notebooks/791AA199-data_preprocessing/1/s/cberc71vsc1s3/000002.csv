"0","condition.66.33.pairs <- c(60,67,68,73,75,77,80,88,90,101,171,172,173,174,176,177,178,179,180,188)"
"0","condition.83.17.pairs <- c(61,64,66,69,70,72,78,82,94,98,102,181,182,183,184,185,186,187,189,190)"
"0","condition.100.66.pairs <- c(62,71,74,79,81,85,86,95,96,99,151,152,153,154,155,156,157,158,159,160)"
"0","condition.100.33.pairs <- c(63,65,76,83,84,89,91,92,93,97,100,161,162,163,164,165,166,167,168,169,170)"
"0","all.pairs <- c(condition.66.33.pairs,condition.83.17.pairs,"
"0","               condition.100.66.pairs,condition.100.33.pairs)"
"0","#utility function to look up pair and label condition"
"0","pair.to.condition <- function(p) {"
"0","    if (p %in% condition.66.33.pairs) {"
"0","      '66-33'"
"0","    }"
"0","  else if (p %in% condition.83.17.pairs) {"
"0","      '83-17'"
"0","  }"
"0","  else if (p %in% condition.100.66.pairs) {"
"0","      '100-66'"
"0","  }"
"0","  else if (p %in% condition.100.33.pairs) {"
"0","      '100-33'"
"0","  }"
"0","}"
"0","#utility function to look up pair and label condition"
"0","pair.to.experiment <- function(p) {"
"0","  if ((p %in% condition.66.33.pairs) | (p %in% condition.83.17.pairs)) {"
"0","      'Experiment1'}"
"0","  else {"
"0","    'Experiment2'"
"0","  }}"
"0"," "
"0","# Reads in a pair and adds condition info and trial number"
"0","read.pair <- function(pair.id) {"
"0","  this.pair.data <- read.csv(paste(sep="""",data.directory,pair.id,"".txt""),stringsAsFactors=FALSE)"
"0","  this.pair.data$Pair <- pair.id"
"0","  this.pair.data$Condition <- pair.to.condition(pair.id)"
"0","  this.pair.data$Experiment <- pair.to.experiment(pair.id)"
"0","  #order Block levels to avoid them being messed up by ddply, then add trial numbers by block using ddply"
"0","  this.pair.data$Block <- factor(this.pair.data$Block,"
"0","                                    levels=c(""VocabTraining"","
"0","                                             ""VocabTesting"","
"0","                                             ""Training"","
"0","                                             ""IsolateTesting1"","
"0","                                             ""InteractiveTesting"","
"0","                                             ""InteractiveTesting1"","
"0","                                             ""InteractiveTesting2"","
"0","                                             ""IsolateTesting2""))"
"0","  this.pair.data <- ddply(this.pair.data,~ Block,transform,TrialN=1:length(Block))"
"0","  this.pair.data"
"0","}"
"0","all.data <- do.call(""rbind"", lapply(all.pairs, function(pair) read.pair(pair)))"
"0","#keep only blocks we need"
"0","all.data <- subset(all.data,Block %in% c(""Training"",""IsolateTesting1"",""InteractiveTesting"",""IsolateTesting2""))"
"0","#utility function to split interaction data into two blocks for analysis"
"0","all.data$Block <- mapply(function(block,trialn)"
"0","  ifelse(block==""InteractiveTesting"" & trialn<=48,""InteractiveTesting1"","
"0","         ifelse(block==""InteractiveTesting"" & trialn>48,""InteractiveTesting2"","
"0","                                levels(all.data$Block)[block])),"
"0","  all.data$Block,all.data$TrialN)"
"0","#relabel blocks"
"0","all.data$Block <- revalue(all.data$Block,"
"0","                         c(""Training""=""Training"","
"0","                           ""IsolateTesting1""=""Recall 1"","
"0","                           ""InteractiveTesting1""=""Interaction Block 1"","
"0","                           ""InteractiveTesting2""=""Interaction Block 2"","
"0","                           ""IsolateTesting2""=""Recall 2"""
"0","              ))"
